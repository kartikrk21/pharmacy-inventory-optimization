<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings - Pharmacy Inventory</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="dashboard-container">
        <header class="dashboard-header">
            <h1>⚙️ System Settings</h1>
            <div class="header-controls">
                <a href="/dashboard" class="btn btn-primary">← Back to Dashboard</a>
            </div>
        </header>

        <div class="content-grid">
            <!-- Optimization Settings -->
            <div class="panel">
                <h2>Optimization Settings</h2>
                <form id="optimizationForm">
                    <div class="form-group">
                        <label>Service Level Target (%)</label>
                        <input type="number" id="serviceLevel" value="95" min="80" max="99" step="0.1">
                    </div>
                    <div class="form-group">
                        <label>Lead Time (days)</label>
                        <input type="number" id="leadTime" value="7" min="1" max="30">
                    </div>
                    <div class="form-group">
                        <label>Safety Stock Days</label>
                        <input type="number" id="safetyStockDays" value="14" min="7" max="30">
                    </div>
                    <div class="form-group">
                        <label>Optimization Method</label>
                        <select id="optimizationMethod">
                            <option value="ROBUST_OR">Robust OR</option>
                            <option value="SMDP">SMDP Policy</option>
                            <option value="DQN">DQN RL</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-success">Save Settings</button>
                </form>
            </div>

            <!-- Cost Parameters -->
            <div class="panel">
                <h2>Cost Parameters</h2>
                <form id="costForm">
                    <div class="form-group">
                        <label>Holding Cost per Unit ($/day)</label>
                        <input type="number" id="holdingCost" value="0.50" step="0.01">
                    </div>
                    <div class="form-group">
                        <label>Order Cost ($)</label>
                        <input type="number" id="orderCost" value="100" step="1">
                    </div>
                    <div class="form-group">
                        <label>Shortage Cost ($/unit)</label>
                        <input type="number" id="shortageCost" value="50" step="1">
                    </div>
                    <div class="form-group">
                        <label>Waste Cost Multiplier</label>
                        <input type="number" id="wasteCostMultiplier" value="2.0" step="0.1">
                    </div>
                    <button type="submit" class="btn btn-success">Save Costs</button>
                </form>
            </div>

            <!-- Alert Thresholds -->
            <div class="panel">
                <h2>Alert Thresholds</h2>
                <form id="alertForm">
                    <div class="form-group">
                        <label>Low Stock Threshold (%)</label>
                        <input type="number" id="lowStockThreshold" value="20" min="0" max="50">
                    </div>
                    <div class="form-group">
                        <label>High Waste Threshold (%)</label>
                        <input type="number" id="highWasteThreshold" value="15" min="0" max="50">
                    </div>
                    <div class="form-group">
                        <label>Monitoring Interval (sec)</label>
                        <input type="number" id="monitoringInterval" value="60" min="10" max="300">
                    </div>
                    <button type="submit" class="btn btn-success">Save Alerts</button>
                </form>
            </div>

            <!-- System Info -->
            <div class="panel">
                <h2>System Information</h2>
                <div style="padding: 15px; background: #f9fafb; border-radius: 8px;">
                    <p><strong>Version:</strong> 1.0.0</p>
                    <p><strong>Database:</strong> SQLite</p>
                    <p><strong>Kafka Status:</strong> <span id="kafkaStatus">Connected</span></p>
                    <p><strong>ML Models:</strong> <span id="modelsStatus">Loaded</span></p>
                </div>
                <button class="btn btn-danger" style="margin-top: 15px;" onclick="resetSystem()">Reset System</button>
            </div>
        </div>
    </div>

    <script>
        // Form handlers
        document.getElementById('optimizationForm').addEventListener('submit', function(e) {
            e.preventDefault();
            alert('Optimization settings saved!');
        });

        document.getElementById('costForm').addEventListener('submit', function(e) {
            e.preventDefault();
            alert('Cost parameters saved!');
        });

        document.getElementById('alertForm').addEventListener('submit', function(e) {
            e.preventDefault();
            alert('Alert thresholds saved!');
        });

        function resetSystem() {
            if (confirm('Are you sure you want to reset the system? This will clear all data.')) {
                alert('System reset initiated...');
            }
        }

        // Add CSS for forms
        const style = document.createElement('style');
        style.textContent = `
            .form-group {
                margin-bottom: 15px;
            }
            .form-group label {
                display: block;
                margin-bottom: 5px;
                font-weight: 600;
                color: #374151;
            }
            .form-group input,
            .form-group select {
                width: 100%;
                padding: 8px 12px;
                border: 1px solid #d1d5db;
                border-radius: 6px;
                font-size: 14px;
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>